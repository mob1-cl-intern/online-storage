## 作成したいアプリ
シンプルなオンラインストレージのWebアプリ

## フロントエンドの構成
フロントエンドツールとして Vite を使用します。
開発言語は TypeScript であり、ライブラリは React です。
/Workspace/Frontend が React のプロジェクトになりますが、他のツールにより既に作成されている状態です

## バックエンドの構成 (/workspace/Apps/front-end)
アプリケーションのバックエンドです。すでに C# (ASP.NET9) のプロジェクトが用意されています
バックエンドは UI をもたず、API を提供します
フォルダは /Workspace/Backend です


## 欲しい機能

### 概要
- ログイン&ログアウト機能
  - ログインすれば、オンラインストレージのすべての機能を使用できる
- ファイルアップロード機能
  - アップロードできるファイルは、画像と PDF ファイルだけ
  - ドラッグアンドドロップでアップロードできる
- ファイルプレビュー機能
  - 画像と PDF は、ダウンロードしなくても Web 上で内容を確認できる
- ファイルダウンロード機能
- ファイル削除機能
  - 削除の前に、確認ダイアログが表示される
- フォルダ管理
  - オンラインストレージにはルートのフォルダがあり、その配下にフォルダを作ってファイルを格納することができる
  - フォルダを削除すると、そのフォルダの中にあるファイルもすべて削除される
  - 削除の前に、確認ダイアログが表示される
- タグ
  - ファイルに対して付与する、タグを作成することができる
  - タグは作成、更新、削除、参照をすることができる
  - ファイルアップロード後に、タグを付与することができる
    - ファイルに付与済みのタグが削除された場合は、ファイルからそのタグが消える
    - ファイルに付与済みのタグが更新された場合は、ファイルのそのタグも更新される

**フロントエンドでは、/workspace/Frontend/services/api.ts に、このバックエンドが提供するコマンドの種類や呼び方が記述されています。いまは、フロントエンドだけで動作できるようにモックのコードが記述されています。これを参考に、バックエンドの REST API を実装して、api.ts のモックもバックエンドに合わせて、実際の処理が動作するように変更してください。**

## データベースサーバー
データベースサーバーは MongoDB を使用します。
- 接続文字列は mongodb://mongo:27017 です。認証情報は不要です。
- データベースサーバーのホスト名は mongo です。
- このシステム用のデータベース名は ofs です。
- appsettings.json に接続情報を記載してください

データベースで管理するデータは以下の通りです。
- ファイルの情報 (アップロードされているファイル、フルパス、タグなど)
- フォルダの情報
- ユーザー (ログインアカウント)

## ファイルのアップロード先について
まずは、このバックエンドアプリのどこかのフォルダに保存されるようにしてください。
フォルダ名は upload-dir でお願いします。
将来的には、Amazon S3 などのストレージサービスに切り替えられるよう、考慮してください。

## AIエージェントによるコーディングで発生しやすい問題について
- Tag クラスの名前空間重複エラー
  - MongoDB の Tag クラスと重複するので注意が必要
- MongoDB の users コレクションについて
  - ユーザーのコレクションにおいて、ユーザー名をそのまま ID にするとエラーになります
  - ID は自動生成させ、ユーザー名は name などのフィールド名にしてください
- OpenAPI と Swagger UI について
  - 初期状態でどちらも動くようになっています (パッケージ追加済) ので、バージョンを変えたり、不要なパッケージの追加はしないでください
  - Swagger のエンドポイントは /openapi/v1.json から変更しないでください
- Swaggre での Upload エラー
  - ファイルをアップロードするアクション関数のパラメーターに [FromForm] 属性をつける
- **ログインしても、JWT の処理がうまくいかず 401 になる**
  - 認証されていたら確実に処理が実行できるようにする
- ファイルアップロード処理がうまくいかない
  - upload-dir フォルダに確実にファイルがアップロードされるようにする
  - アップロードされたファイルを、API から取得できるようにする
  - フロントエンドから、アップロードした画像が見れないことが多いので、確実に取得できるようにする
- [参考] プロセスを確実に止めるコマンドについて
  - lsof -i:<ポート番号> ポート番号は 3000
  - kill -15 <プロセスID>

## その他
- ファイルやフォルダを検索するときは、"vscode-remote://dev-container+" のような URI スキームを付けずに、普通に検索してください。
- API は Swagger UI でテストできるようにしてください。